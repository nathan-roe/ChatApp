(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{120:function(e,t,n){},124:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),i=n(61),o=n.n(i),r=n(62),s=n(22),l=n(6),d=n(19),j=n.n(d),h=n(8),p=n.n(h),u=n(7),b=n(125),x=n(126),g=n(65),m=n(127),f=n(128),O=(n(120),n(10));var y=function(e){return Object(a.jsx)("div",{id:e.id,onDragStart:function(e){var t=e.target;e.dataTransfer.dropEffect="copy",e.dataTransfer.setData("transfer",t.id),setTimeout((function(){t.style.display="none"}),0)},onDragOver:function(e){e.stopPropagation()},className:e.className,draggable:"true",children:e.children})};var v=function(e){return Object(a.jsx)("div",{id:e.id,onDrop:function(e){e.preventDefault();var t=e.dataTransfer.getData("transfer"),n=document.getElementById(t);n.style.display="inherit",e.target.appendChild(n);var a=t.split(",");Object(u.c)("/newRoom/"+a[0]+"/"+a[1])},onDragOver:function(e){e.preventDefault()},className:e.className,style:{display:"flex"},children:e.children})},w=(n(60),function(e){var t=e.chat;return Object(a.jsxs)("div",{style:{padding:"5px",paddingTop:"0",border:"1px solid grey",marginTop:"2vh",borderRadius:"1em"},children:[Object(a.jsxs)("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"space-between",marginTop:"0",marginBottom:"2vh"},children:[Object(a.jsxs)("b",{style:{fontSize:"16px"},children:[t.user[0]," ",t.user[1]]}),Object(a.jsx)("p",{style:{marginLeft:"1vw",fontSize:"12px"},children:t.time})]}),Object(a.jsx)("p",{children:t.message})]})}),C=n(60),I=function(e){var t=e.userId,n=e.roomId,i=Object(c.useState)((function(){return j()(":8000")})),o=Object(l.a)(i,1)[0],d=Object(c.useState)({}),h=Object(l.a)(d,2),I=h[0],N=h[1],S=Object(c.useState)(""),T=Object(l.a)(S,2),k=T[0],A=T[1],B=Object(c.useState)([]),D=Object(l.a)(B,2),L=D[0],_=D[1],P=Object(c.useState)(!0),z=Object(l.a)(P,2),R=z[0],G=z[1],E=Object(c.useState)(8),H=Object(l.a)(E,2),M=H[0],X=H[1],F=Object(c.useState)("52vw"),Y=Object(l.a)(F,2),J=Y[0],U=Y[1],W=Object(c.useState)(!1),V=Object(l.a)(W,2),q=V[0],K=V[1],Q=Object(c.useState)([]),Z=Object(l.a)(Q,2),$=Z[0],ee=Z[1],te=Object(c.useState)([]),ne=Object(l.a)(te,2),ae=ne[0],ce=ne[1],ie=Object(c.useState)([]),oe=Object(l.a)(ie,2),re=oe[0],se=oe[1],le=Object(c.useState)([]),de=Object(l.a)(le,2),je=de[0],he=de[1],pe=Object(c.useState)(""),ue=Object(l.a)(pe,2),be=ue[0],xe=ue[1],ge=Object(c.useState)(""),me=Object(l.a)(ge,2),fe=me[0],Oe=me[1];Object(c.useEffect)((function(){p.a.get("http://localhost:8000/api/users/"+t).then((function(e){void 0===e.data._id?Object(u.c)("/"):N(e.data);var t=[];e.data._roomIds.filter((function(e){return e!==n})).map((function(e,n){p.a.get("http://localhost:8000/api/roomIds/get/"+e).then((function(e){ce([].concat(Object(s.a)(ae),[e.data.name])),t.push({name:e.data.name,roomId:e.data.id,type:"submit",_id:e.data._id})}))})),ee(t);var a=[];e.data._friends.map((function(e,t){p.a.get("http://localhost:8000/api/friends/get/"+e).then((function(e){se([].concat(Object(s.a)(re),[e.data.friendName])),a.push({name:e.data.friendName,friendId:e.data.id,_id:e.data._id})}))})),he(a),console.log(je)})).catch((function(e){return console.log("This user is not in the database",e)})),p.a.get("http://localhost:8000/api/rooms/"+n).then((function(e){_(e.data.messageLog)})).catch((function(e){return console.log("This user is not in the database",e)})),ve()}),[]),Object(c.useEffect)((function(){console.log("The useEffect was enteed"),L.length>0&&(console.log("Messages length is greater than 0"),o.on("message-to-client",(function(e){if(!L.includes(e)){var t=[].concat(Object(s.a)(L),[e]);console.log(t),p.a.put("http://localhost:8000/api/rooms/edit/"+n,t).then((function(e){return e})).catch((function(e){return e})),_(t),ve()}})),K(!1))}),[q]);var ye=Object(c.useRef)(),ve=function(){null!==ye.current&&ye.current.scrollIntoView()};console.log("the room id is: ",n),p.a.get("http://localhost:8000/api/roomIds/getRoom/"+n).then((function(e){return Oe(e.data.name)})).catch((function(e){return console.log(e)}));return Object(a.jsx)(b.a,{fluid:"sm",className:"container",style:{maxWidth:"100%",maxHeight:"100vh",backgroundColor:"rgb(45,51,56)"},children:Object(a.jsxs)(x.a,{children:[Object(a.jsx)(g.a,{xs:.5,style:{display:"flex",justifyContent:"flex-start"},children:Object(a.jsx)("button",{onClick:function(e){G(!R),!1===R?(X(8),U("52vw")):(X(10),U("68.70vw"))},style:{maxHeight:"6vh",border:"2px solid whitesmoke",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(a.jsxs)("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-arrow-right-circle",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[Object(a.jsx)("path",{fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),Object(a.jsx)("path",{fillRule:"evenodd",d:"M4 8a.5.5 0 0 0 .5.5h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5A.5.5 0 0 0 4 8z"})]})})}),R?Object(a.jsxs)(g.a,{xs:2,children:[Object(a.jsx)(x.a,{style:{display:"flex",flexDirection:"column",height:"45vh",textAlign:"center"},children:Object(a.jsx)(O.a,{className:"bg-dark text-white",style:{width:"100%",height:"45vh",overflow:"scroll hidden",overflowX:"hidden",display:"flex",flexDirection:"column",alignItems:"center"},children:Object(a.jsxs)("div",{className:"scrollbar scrollbar-primary",children:[Object(a.jsx)("div",{className:"navHeader",style:{display:"flex"},children:Object(a.jsx)(O.a.Title,{children:Object(a.jsx)("button",{onClick:function(){p.a.post("http://localhost:8000/api/rooms/new").then((function(e){p.a.post("http://localhost:8000/api/roomId/"+t,{name:"".concat(I.firstName,"'s room"),id:e.data._id}).then((function(e){ee([].concat(Object(s.a)($),[{name:e.data.name,roomId:e.data.id,type:"submit",_id:e.data._id}]))})).catch((function(e){return console.log(e)})),Object(u.c)("/main/"+I._id+"/"+e.data._id)})).catch((function(e){return console.log(e)}))},style:{maxHeight:"6vh",border:"2px solid whitesmoke",width:"100vw",display:"flex",justifyContent:"center",alignItems:"center",alignSelf:"center"},children:"Create a Room!"})})}),Object(a.jsxs)(O.a.Text,{style:{paddingLeft:"45vw",paddingRight:"45vw",borderBottom:"1px solid grey"},children:["Your Rooms | ",Object(a.jsx)("span",{style:{cursor:"pointer"},onClick:function(e){return Object(u.c)("/newRoom/"+t+"/5fb4a3eb1285541d50d8cc7d")},children:"Main"})]}),$.map((function(e,t){return Object(a.jsx)(y,{id:[I._id,e.roomId],className:t,children:Object(a.jsx)("form",{onSubmit:function(e){return function(e,t){e.preventDefault();var n={type:"submit"};ee($.map((function(e){return e===$[t]?Object.assign({},e,n):e}))),p.a.put("http://localhost:8000/api/roomIds/edit/"+$[t]._id,{name:$[t].name}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}(e,t)},children:Object(a.jsx)("input",{style:{width:"12%"},type:$[t].type,value:$[t].name,onDoubleClick:function(e){return ee($.map((function(e){return e===$[t]?Object.assign({},e,{type:"text"}):e})))},onChange:function(e){return ee($.map((function(n){return n===$[t]?Object.assign({},n,{name:e.target.value}):n})))}})})},t)}))]})})}),Object(a.jsx)(x.a,{style:{display:"flex",flexDirection:"column",alignItems:"stretch",height:"45vh"},children:Object(a.jsx)(O.a,{className:"bg-dark text-white",style:{width:"100%",height:"45vh",overflow:"scroll hidden",overflowX:"hidden",display:"flex",flexDirection:"column",alignItems:"center"},children:Object(a.jsxs)("div",{className:"scrollbar scrollbar-primary",children:[Object(a.jsx)("div",{className:"navHeader",style:{display:"flex"}}),Object(a.jsx)(O.a.Title,{style:{maxHeight:"6vh",border:"2px solid whitesmoke",width:"100vw",display:"flex",justifyContent:"center",alignItems:"center",alignSelf:"center"},children:"Friends"}),Object(a.jsxs)(O.a.Text,{style:{paddingLeft:"45vw",paddingRight:"45vw",textAlign:"center"},children:[Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=be.split(" ");console.log("The name array is: "),console.log(t),console.log(t[0]),console.log(t[1]),p.a.get("http://localhost:8000/api/users/all").then((function(e){var n=e.data.filter((function(e){return e.firstName==t[0]&&e.lastName==t[1]})).map((function(e){return e._id}));console.log(n[0]),p.a.post("http://localhost:8000/api/friend/"+n[0],{friendName:"".concat(t[0]," ").concat(t[1]),id:n}).then((function(e){console.log("Hello World"),console.log(e.data),he([].concat(Object(s.a)(je),[{name:e.data.friendName,id:e.datafriendId}]))})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))},children:[Object(a.jsx)("label",{htmlFor:"",children:"Please enter a friend's name:"}),Object(a.jsx)("input",{type:"text",onChange:function(e){return xe(e.target.value)}}),Object(a.jsx)("input",{type:"submit",value:"submit friend"})]}),je.map((function(e,t){e.friendName}))]})]})})}),Object(a.jsx)(x.a,{style:{display:"flex",flexDirection:"column",alignItems:"stretch",height:"10vh"},children:Object(a.jsx)(O.a,{className:"bg-dark text-white",style:{width:"100%",height:"10vh",overflow:"scroll hidden",overflowX:"hidden"},children:Object(a.jsxs)(O.a.Title,{children:["Hello ",I.firstName," ",I.lastName]})})})]}):"",Object(a.jsx)(g.a,{xs:M,style:{padding:"0px"},children:Object(a.jsxs)(O.a,{className:"bg-dark text-white",style:{width:"100%",height:"100vh",display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[Object(a.jsx)(v,{userId:I._id,children:Object(a.jsxs)("div",{className:"midHeader",style:Object(r.a)({width:"100%",borderBottom:"1px solid grey",height:"10vh",paddingTop:"0px",display:"flex",justifyContent:"space-evenly"},"paddingTop","2vh"),children:[fe?Object(a.jsx)("h4",{children:fe}):"","5fb4a3eb1285541d50d8cc7d"===n?Object(a.jsx)("h4",{children:"Main"}):""]})}),Object(a.jsxs)("div",{className:"centerMain",style:{overflowY:"scroll"},children:[L.map((function(e,t){return Object(a.jsx)("div",{children:Object(a.jsx)(w,{chat:e})},t)})),Object(a.jsx)("div",{ref:ye,className:"list-bottom"})]}),Object(a.jsx)("div",{className:"userInput",children:Object(a.jsxs)(m.a,{style:{display:"flex"},onSubmit:function(e){console.log("Began submit process"),e.preventDefault();var t=C().format("M/D/YY hh:mm a");return o.emit("message-to-server",{message:k,time:t,user:[I.firstName,I.lastName,I._id]}),console.log("Socket emitted"),K(!0),A(""),function(){return o.disconnect(!0)}},children:[Object(a.jsx)(m.a.Group,{children:Object(a.jsx)(m.a.Control,{type:"text",style:{width:J},value:k,onChange:function(e){return A(e.target.value)}})}),Object(a.jsx)(m.a.Group,{children:Object(a.jsx)(f.a,{style:{marginLeft:"2vw",width:"10vw"},type:"submit",children:"Chat"})})]})})]})}),Object(a.jsxs)(g.a,{style:{height:"100vh",margin:"0px",padding:"0px"},xs:1.2,children:[Object(a.jsx)("div",{className:"contacts",style:{height:"60vh"},children:Object(a.jsx)(O.a,{className:"bg-dark text-white",style:{width:"100%",height:"60vh",overflow:"scroll hidden",overflowX:"hidden"}})}),Object(a.jsx)("div",{className:"social",style:{display:"flex",flexDirection:"column",alignItems:"center"},children:Object(a.jsx)(O.a,{className:"bg-dark text-white",style:{width:"100%",height:"40vh",overflow:"scroll hidden",overflowX:"hidden"}})})]})]})})},N=function(e){var t=e.onSubmitProp,n=Object(c.useState)(""),i=Object(l.a)(n,2),o=i[0],r=i[1],s=Object(c.useState)(""),d=Object(l.a)(s,2),j=d[0],h=d[1];return Object(a.jsxs)(b.a,{style:{display:"flex",flexDirection:"column",alignItems:"center",border:"1px solid grey",height:"75vh",width:"50vw",justifyContent:"space-between",marginTop:"5vh",marginBottom:"5vh"},children:[Object(a.jsx)("h1",{style:{paddingTop:"2vh"},children:"Chat App"}),Object(a.jsx)("h3",{children:"Sign In"}),Object(a.jsxs)(m.a,{style:{width:"50%"},onSubmit:function(e){e.preventDefault(),t({email:o,password:j})},children:[Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{style:{marginBottom:"-15px",paddingLeft:"10px",textAlign:"center",width:"100%"},children:Object(a.jsx)("span",{style:{marginBottom:"-15px",zIndex:"2",backgroundColor:"white",padding:"1px",color:"gray"},children:"Email or Phone"})}),Object(a.jsx)(m.a.Control,{type:"text",style:{paddingTop:"5px",marginTop:"-12px",textAlign:"center",color:"black"},onChange:function(e){return r(e.target.value)}})]}),Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{style:{marginBottom:"-15px",paddingLeft:"10px",textAlign:"center",width:"100%"},children:Object(a.jsx)("span",{style:{marginBottom:"-15px",zIndex:"2",backgroundColor:"white",padding:"1px",color:"gray"},children:"Password"})}),Object(a.jsx)(m.a.Control,{type:"password",style:{paddingTop:"5px",marginTop:"-12px",textAlign:"center",color:"black"},onChange:function(e){return h(e.target.value)}})]}),Object(a.jsx)(m.a.Group,{style:{display:"flex",justifyContent:"center"},children:Object(a.jsx)(f.a,{type:"submit",children:"Continue"})})]}),Object(a.jsxs)("p",{children:["Not a User? ",Object(a.jsx)(u.a,{to:"/register",children:"Create an Account!"})]})]})},S=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],i=t[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)(N,{onSubmitProp:function(e){p.a.get("http://localhost:8000/api/users/email/"+e.email).then((function(t){t.data.password===e.password?Object(u.c)("/main/"+t.data._id+"/5fb4a3eb1285541d50d8cc7d"):i(["Email or Password is incorrect"])})).catch((function(e){console.log(e),i(["Email or Password is incorrect"])}))}}),n.map((function(e,t){return Object(a.jsx)("p",{children:e},t)}))]})},T=function(e){var t=e.onSubmitProp,n=Object(c.useState)(""),i=Object(l.a)(n,2),o=i[0],r=i[1],s=Object(c.useState)(""),d=Object(l.a)(s,2),j=d[0],h=d[1],p=Object(c.useState)(""),x=Object(l.a)(p,2),g=x[0],O=x[1],y=Object(c.useState)(""),v=Object(l.a)(y,2),w=v[0],C=v[1],I=Object(c.useState)(""),N=Object(l.a)(I,2),S=N[0],T=N[1],k=Object(c.useState)(""),A=Object(l.a)(k,2),B=A[0],D=A[1],L=Object(c.useState)("default-avatar.png"),_=Object(l.a)(L,1)[0];return Object(a.jsxs)(b.a,{style:{display:"flex",flexDirection:"column",alignItems:"center",border:"1px solid grey",height:"fit-content",width:"50vw",justifyContent:"space-between",marginTop:"1vh",marginBottom:"1vh"},children:[Object(a.jsx)("h1",{style:{paddingTop:"2vh"},children:"Chat App"}),Object(a.jsx)("h3",{children:"Register"}),Object(a.jsxs)(m.a,{style:{width:"50%"},onSubmit:function(e){e.preventDefault(),t({firstName:o,lastName:j,email:g,phone:w,password:S,confirmPassword:B,profileImg:_})},children:[Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{style:{marginBottom:"-15px",paddingLeft:"10px",textAlign:"center",width:"100%"},children:Object(a.jsx)("span",{style:{marginBottom:"-15px",zIndex:"2",backgroundColor:"white",padding:"1px",color:"gray"},children:"First Name"})}),Object(a.jsx)(m.a.Control,{type:"text",style:{paddingTop:"5px",marginTop:"-12px",textAlign:"center",color:"black"},onChange:function(e){return r(e.target.value)}})]}),Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{style:{marginBottom:"-15px",paddingLeft:"10px",textAlign:"center",width:"100%"},children:Object(a.jsx)("span",{style:{marginBottom:"-15px",zIndex:"2",backgroundColor:"white",padding:"1px",color:"gray"},children:"Last Name"})}),Object(a.jsx)(m.a.Control,{type:"text",style:{paddingTop:"5px",marginTop:"-12px",textAlign:"center",color:"black"},onChange:function(e){return h(e.target.value)}})]}),Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{style:{marginBottom:"-15px",paddingLeft:"10px",textAlign:"center",width:"100%"},children:Object(a.jsx)("span",{style:{marginBottom:"-15px",zIndex:"2",backgroundColor:"white",padding:"1px",color:"gray"},children:"Email Address"})}),Object(a.jsx)(m.a.Control,{type:"email",style:{paddingTop:"5px",marginTop:"-12px",textAlign:"center",color:"black"},onChange:function(e){return O(e.target.value)}})]}),Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{style:{marginBottom:"-15px",paddingLeft:"10px",textAlign:"center",width:"100%"},children:Object(a.jsx)("span",{style:{marginBottom:"-15px",zIndex:"2",backgroundColor:"white",padding:"1px",color:"gray"},children:"Phone Number"})}),Object(a.jsx)(m.a.Control,{type:"tel",style:{paddingTop:"5px",marginTop:"-12px",textAlign:"center",color:"black"},onChange:function(e){return C(e.target.value)}})]}),Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{style:{marginBottom:"-15px",paddingLeft:"10px",textAlign:"center",width:"100%"},children:Object(a.jsx)("span",{style:{marginBottom:"-15px",zIndex:"2",backgroundColor:"white",padding:"1px",color:"gray"},children:"Password"})}),Object(a.jsx)(m.a.Control,{type:"password",style:{paddingTop:"5px",marginTop:"-12px",textAlign:"center",color:"black"},onChange:function(e){return T(e.target.value)}})]}),Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{style:{marginBottom:"-15px",paddingLeft:"10px",textAlign:"center",width:"100%"},children:Object(a.jsx)("span",{style:{marginBottom:"-15px",zIndex:"2",backgroundColor:"white",padding:"1px",color:"gray"},children:"Confirm Password"})}),Object(a.jsx)(m.a.Control,{type:"password",style:{paddingTop:"5px",marginTop:"-12px",textAlign:"center",color:"black"},onChange:function(e){return D(e.target.value)}})]}),Object(a.jsx)(m.a.Group,{style:{display:"flex",justifyContent:"center"},children:Object(a.jsx)(f.a,{type:"submit",children:"Continue"})})]}),Object(a.jsxs)("p",{children:["Already a User? ",Object(a.jsx)(u.a,{to:"/",children:"Log In!"})]})]})},k=function(){return Object(a.jsx)(T,{onSubmitProp:function(e){p.a.post("http://localhost:8000/api/users/new",e).then((function(e){return Object(u.c)("/main/"+e.data._id+"/5fb4a3eb1285541d50d8cc7d")})).catch((function(e){return console.log(e)}))}})},A=function(e){var t=e.userId,n=e.roomId;return Object(u.c)("/main/"+t+"/"+n),Object(a.jsx)(a.Fragment,{})};n(123);var B=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(u.b,{children:[Object(a.jsx)(S,{path:"/"}),Object(a.jsx)(k,{path:"/register"}),Object(a.jsx)(I,{path:"/main/:userId/:roomId"}),Object(a.jsx)(A,{path:"/newRoom/:userId/:roomId"})]})})};o.a.render(Object(a.jsx)(B,{}),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.d9432184.chunk.js.map